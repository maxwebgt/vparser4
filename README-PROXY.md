# üåê –°–∏—Å—Ç–µ–º–∞ –ü—Ä–æ–∫—Å–∏ –¥–ª—è Playwright Parser

## –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
modules/
‚îú‚îÄ‚îÄ proxyHandler.js  - –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∫—Å–∏
‚îî‚îÄ‚îÄ config.js       - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

test-proxy.js                - –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–∫—Å–∏ —Å WebShare API
test-proxy-simple.js         - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –±–µ–∑ API (–ø—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–æ–∫—Å–∏)  
playwright-parser-with-proxy.js - –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∫—Å–∏
```

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### 1. ProxyHandler –∫–ª–∞—Å—Å (`modules/proxyHandler.js`)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–∫—Å–∏ –∏–∑ WebShare.io API
- ‚úÖ –°–ª—É—á–∞–π–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–æ–∫—Å–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã (HTTP 403)

#### 2. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
```javascript
const proxyHandler = new ProxyHandler();

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –∏–∑ WebShare API
await proxyHandler.fetchProxies();

// –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ–∫—Å–∏
const proxy = proxyHandler.getNextProxy();

// –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –∫–∞–∫ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π
proxyHandler.markProxyFailed(proxy, '–ø—Ä–∏—á–∏–Ω–∞');

// –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –∫–∞–∫ —Ä–∞–±–æ—á–∏–π
proxyHandler.markProxySuccess(proxy);

// –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ø—ã—Ç–∫—É –∑–∞—â–∏—Ç—ã (HTTP 403)
const needProxy = proxyHandler.registerProtectionHit();

// –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
proxyHandler.printStats();
```

#### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Playwright
```javascript
const launchOptions = {
  headless: true,
  proxy: {
    server: `http://${proxy.host}:${proxy.port}`,
    username: proxy.username,
    password: proxy.password
  }
};

const browser = await chromium.launch(launchOptions);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ø—Ä–æ–∫—Å–∏:
```bash
node test-proxy-simple.js
```

### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å WebShare API:
```bash
node test-proxy.js
```

### –ü–∞—Ä—Å–µ—Ä —Å –ø—Ä–æ–∫—Å–∏:
```bash
node playwright-parser-with-proxy.js
```

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑–∞–ª–∏ —Ç–µ—Å—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–∫—Å–∏**: 25 –ø—Ä–æ–∫—Å–∏ –∏–∑ WebShare API
2. **–î–µ—Ç–µ–∫—Ü–∏—è –∑–∞—â–∏—Ç—ã**: HTTP 403 –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
3. **–ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**: –ü–æ—Å–ª–µ 3 —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –∑–∞—â–∏—Ç—ã –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏
4. **–†–æ—Ç–∞—Ü–∏—è**: –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö/–Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–æ–∫—Å–∏

### üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –ù–∞—á–∏–Ω–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ **–±–µ–∑ –ø—Ä–æ–∫—Å–∏** (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
2. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ **HTTP 403** - —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç "—É–¥–∞—Ä –∑–∞—â–∏—Ç—ã"
3. –ü–æ—Å–ª–µ **3 —É–¥–∞—Ä–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ–∫—Å–∏
4. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø—Ä–æ–∫—Å–∏ - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π
5. –í–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É—Å–ø–µ—Ö–æ–≤/–Ω–µ—É–¥–∞—á

## üîë –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

API –∫–ª—é—á WebShare –≤ `modules/proxyHandler.js`:
```javascript
const API_KEY = 'qf8qedpyxethbo8qjdhiol5r4js7lm8jmcs59pkf';
```

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞  
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `playwright-parser-with-proxy.js` –∫–∞–∫ –±–∞–∑—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–∞—Ä—Å–µ—Ä–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∫—Å–∏. 